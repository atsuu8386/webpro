import{r as P,a as d,o as n,b as e,t as r,d as M,e as h,f as c,g as u,v as g,j as m,h as E,F,i as y,n as S,w as x,c as I}from"./vue-kMPmmKrw.js";import"./bootstrap-D5_hyIF7.js";import{_ as C,L as V}from"./LoadingSpinner-CfOyOWer.js";import"./vendor-B9ygI19o.js";const q=window.axios,B={name:"ProductModal",components:{LoadingSpinner:V},props:{show:{type:Boolean,default:!1},mode:{type:String,default:"add",validator:i=>["add","edit","view"].includes(i)},product:{type:Object,default:()=>null},errors:{type:Object,default:()=>({})}},data(){return{localForm:{name:"",sku:"",description:"",price:0,cost_price:null,unit_type:"piece",unit_label:"",weight:null,stock_quantity:0,min_stock:0,image:null,images:[],is_active:0,sort_order:0,notes:""},imagePreview:null,imageFile:null,isLoading:!1,t:window.productTranslations||{}}},watch:{show(i){i?(this.mode==="add"&&this.resetForm(),this.$nextTick(()=>{this.$refs.triggerButton&&this.$refs.triggerButton.click()})):this.$nextTick(()=>{const l=document.getElementById("productModal");if(l){const _=l.querySelector('button[data-bs-dismiss="modal"]');_&&_.click()}})},product:{handler(i){this.mode==="edit"&&i&&i.id?(this.isLoading=!0,q.get(`/products/${i.id}`).then(l=>{const _=l.data;this.populateForm(_)}).catch(l=>{console.error("Error fetching product details:",l),this.$emit("close"),alert(this.__("error_fetching_data")||"Error loading product data")}).finally(()=>{this.isLoading=!1})):i?this.populateForm(i):this.resetForm()},immediate:!0,deep:!0},mode(){this.mode==="add"&&this.resetForm()}},mounted(){this.$nextTick(()=>{const i=this.$refs.productModal;i&&i.addEventListener("hidden.bs.modal",()=>{this.$emit("close")})})},methods:{__(i,l=""){return this.t[i]||l||i},populateForm(i){this.localForm=JSON.parse(JSON.stringify(i)),this.localForm.image_url?this.imagePreview=this.localForm.image_url:this.localForm.image},getFieldError(i){if(!this.errors||!this.errors[i])return null;const l=this.errors[i];return Array.isArray(l)?l[0]:l},handleSave(){this.$emit("save",{...this.localForm,mode:this.mode,imageFile:this.imageFile})},resetForm(){this.localForm={name:"",sku:"",description:"",price:0,cost_price:null,unit_type:"piece",unit_label:"",weight:null,stock_quantity:0,min_stock:0,image:null,image_url:null,images:[],is_active:0,sort_order:0,notes:""},this.imagePreview=null,this.imageFile=null,this.$refs.imageInput&&(this.$refs.imageInput.value="")},handleImageChange(i){const l=i.target.files[0];if(l){if(!l.type.match("image.*")){alert("Chỉ chấp nhận file ảnh");return}if(l.size>2*1024*1024){alert("Kích thước file không được vượt quá 2MB");return}this.imageFile=l;const _=new FileReader;_.onload=a=>{this.imagePreview=a.target.result},_.readAsDataURL(l)}},removeImage(){this.imagePreview=null,this.imageFile=null,this.localForm.image=null,this.$refs.imageInput&&(this.$refs.imageInput.value="")},formatPrice(i){return i?new Intl.NumberFormat("vi-VN").format(i)+" đ":"0 đ"}}},U={ref:"triggerButton",type:"button",class:"d-none","data-bs-toggle":"modal","data-bs-target":"#productModal"},N={class:"modal modal-blur fade",tabindex:"-1",role:"dialog",ref:"productModal",id:"productModal","data-bs-backdrop":"static","data-bs-keyboard":"false"},L={class:"modal-dialog modal-lg",role:"document"},j={class:"modal-content"},A={class:"modal-header"},O={class:"modal-title"},T={class:"modal-body position-relative"},D={key:0,id:"product-form",enctype:"multipart/form-data"},J={class:"mb-3"},z={class:"form-label"},H={key:0,class:"invalid-feedback"},R={class:"mb-3"},K={class:"form-label"},G={key:0,class:"invalid-feedback"},Q={class:"mb-3"},W={class:"form-label"},X={key:0,class:"invalid-feedback"},Y={class:"row g-2 mb-3"},Z={class:"col-md-6"},$={class:"form-label"},ee={key:0,class:"invalid-feedback"},te={class:"col-md-6"},se={class:"form-label"},le={key:0,class:"invalid-feedback"},re={class:"row g-2 mb-3"},oe={class:"col-md-6"},ie={class:"form-label"},de={value:"piece"},ne={value:"kg"},ae={value:"gram"},ce={value:"liter"},_e={value:"meter"},ue={value:"box"},me={value:"pack"},he={value:"other"},ge={key:0,class:"invalid-feedback"},ve={key:0,class:"col-md-6"},pe={class:"form-label"},be={key:0,class:"invalid-feedback"},fe={class:"row g-2 mb-3"},ke={class:"col-md-6"},Fe={class:"form-label"},ye={key:0,class:"invalid-feedback"},we={class:"row g-2 mb-3"},xe={class:"col-md-6"},Ee={class:"form-label"},Pe={key:0,class:"invalid-feedback"},Me={class:"col-md-6"},Ce={class:"form-label"},Se={key:0,class:"invalid-feedback"},Ie={class:"mb-3"},Ve={class:"form-label"},qe={class:"d-flex align-items-center gap-3"},Be={key:0,class:"image-preview"},Ue=["src"],Ne={class:"flex-fill"},Le={key:0,class:"invalid-feedback"},je={class:"row g-2 mb-3"},Ae={class:"col-md-6"},Oe={class:"form-label"},Te={value:0},De={value:1},Je={key:0,class:"invalid-feedback"},ze={class:"col-md-6"},He={class:"form-label"},Re={key:0,class:"invalid-feedback"},Ke={class:"mb-3"},Ge={class:"form-label"},Qe={key:0,class:"invalid-feedback"},We={key:1},Xe={key:0,class:"mb-4"},Ye={class:"mt-2"},Ze=["src"],$e={class:"mb-3"},et={key:1,class:"mb-3"},tt={key:2,class:"mb-3"},st={class:"mb-3"},lt={key:3,class:"mb-3"},rt={class:"mb-3"},ot={key:4,class:"mb-3"},it={class:"mb-3"},dt={class:"mb-3"},nt={key:5,class:"mb-3"},at={class:"d-flex flex-wrap gap-2 mt-2"},ct={class:"mb-3"},_t={key:6,class:"mb-3"},ut={class:"modal-footer"},mt={type:"button",class:"btn","data-bs-dismiss":"modal"},ht={key:1,type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"};function gt(i,l,_,a,s,t){const v=P("LoadingSpinner");return n(),d("div",null,[e("button",U,null,512),e("div",N,[e("div",L,[e("div",j,[e("div",A,[e("h5",O,r(_.mode==="add"?t.__("add_product"):_.mode==="edit"?t.__("edit_product"):t.__("product_details")),1),l[16]||(l[16]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",T,[M(v,{visible:s.isLoading},null,8,["visible"]),_.mode!=="view"?(n(),d("form",D,[e("div",J,[e("label",z,[u(r(t.__("name"))+" ",1),l[17]||(l[17]=e("span",{class:"text-danger"},"*",-1))]),h(e("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>s.localForm.name=o),required:"",class:m(["form-control",{"is-invalid":t.getFieldError("name")}])},null,2),[[g,s.localForm.name]]),t.getFieldError("name")?(n(),d("div",H,r(t.getFieldError("name")),1)):c("",!0)]),e("div",R,[e("label",K,r(t.__("sku")),1),h(e("input",{"onUpdate:modelValue":l[1]||(l[1]=o=>s.localForm.sku=o),class:m(["form-control",{"is-invalid":t.getFieldError("sku")}])},null,2),[[g,s.localForm.sku]]),t.getFieldError("sku")?(n(),d("div",G,r(t.getFieldError("sku")),1)):c("",!0)]),e("div",Q,[e("label",W,r(t.__("description")),1),h(e("textarea",{"onUpdate:modelValue":l[2]||(l[2]=o=>s.localForm.description=o),class:m(["form-control",{"is-invalid":t.getFieldError("description")}]),rows:"3"},null,2),[[g,s.localForm.description]]),t.getFieldError("description")?(n(),d("div",X,r(t.getFieldError("description")),1)):c("",!0)]),e("div",Y,[e("div",Z,[e("label",$,[u(r(t.__("price"))+" ",1),l[18]||(l[18]=e("span",{class:"text-danger"},"*",-1))]),h(e("input",{"onUpdate:modelValue":l[3]||(l[3]=o=>s.localForm.price=o),type:"number",step:"0.01",min:"0",required:"",class:m(["form-control",{"is-invalid":t.getFieldError("price")}])},null,2),[[g,s.localForm.price,void 0,{number:!0}]]),t.getFieldError("price")?(n(),d("div",ee,r(t.getFieldError("price")),1)):c("",!0)]),e("div",te,[e("label",se,r(t.__("cost_price")),1),h(e("input",{"onUpdate:modelValue":l[4]||(l[4]=o=>s.localForm.cost_price=o),type:"number",step:"0.01",min:"0",class:m(["form-control",{"is-invalid":t.getFieldError("cost_price")}])},null,2),[[g,s.localForm.cost_price,void 0,{number:!0}]]),t.getFieldError("cost_price")?(n(),d("div",le,r(t.getFieldError("cost_price")),1)):c("",!0)])]),e("div",re,[e("div",oe,[e("label",ie,[u(r(t.__("unit_type"))+" ",1),l[19]||(l[19]=e("span",{class:"text-danger"},"*",-1))]),h(e("select",{"onUpdate:modelValue":l[5]||(l[5]=o=>s.localForm.unit_type=o),required:"",class:m(["form-select",{"is-invalid":t.getFieldError("unit_type")}])},[e("option",de,r(t.__("unit_type_piece")),1),e("option",ne,r(t.__("unit_type_kg")),1),e("option",ae,r(t.__("unit_type_gram")),1),e("option",ce,r(t.__("unit_type_liter")),1),e("option",_e,r(t.__("unit_type_meter")),1),e("option",ue,r(t.__("unit_type_box")),1),e("option",me,r(t.__("unit_type_pack")),1),e("option",he,r(t.__("unit_type_other")),1)],2),[[E,s.localForm.unit_type]]),t.getFieldError("unit_type")?(n(),d("div",ge,r(t.getFieldError("unit_type")),1)):c("",!0)]),s.localForm.unit_type==="other"?(n(),d("div",ve,[e("label",pe,[u(r(t.__("unit_label"))+" ",1),l[20]||(l[20]=e("span",{class:"text-danger"},"*",-1))]),h(e("input",{"onUpdate:modelValue":l[6]||(l[6]=o=>s.localForm.unit_label=o),class:m(["form-control",{"is-invalid":t.getFieldError("unit_label")}])},null,2),[[g,s.localForm.unit_label]]),t.getFieldError("unit_label")?(n(),d("div",be,r(t.getFieldError("unit_label")),1)):c("",!0)])):c("",!0)]),e("div",fe,[e("div",ke,[e("label",Fe,r(t.__("weight")),1),h(e("input",{"onUpdate:modelValue":l[7]||(l[7]=o=>s.localForm.weight=o),type:"number",step:"0.001",min:"0",class:m(["form-control",{"is-invalid":t.getFieldError("weight")}]),placeholder:"kg"},null,2),[[g,s.localForm.weight,void 0,{number:!0}]]),t.getFieldError("weight")?(n(),d("div",ye,r(t.getFieldError("weight")),1)):c("",!0)])]),e("div",we,[e("div",xe,[e("label",Ee,r(t.__("stock_quantity")),1),h(e("input",{"onUpdate:modelValue":l[8]||(l[8]=o=>s.localForm.stock_quantity=o),type:"number",min:"0",class:m(["form-control",{"is-invalid":t.getFieldError("stock_quantity")}])},null,2),[[g,s.localForm.stock_quantity,void 0,{number:!0}]]),t.getFieldError("stock_quantity")?(n(),d("div",Pe,r(t.getFieldError("stock_quantity")),1)):c("",!0)]),e("div",Me,[e("label",Ce,r(t.__("min_stock")),1),h(e("input",{"onUpdate:modelValue":l[9]||(l[9]=o=>s.localForm.min_stock=o),type:"number",min:"0",class:m(["form-control",{"is-invalid":t.getFieldError("min_stock")}])},null,2),[[g,s.localForm.min_stock,void 0,{number:!0}]]),t.getFieldError("min_stock")?(n(),d("div",Se,r(t.getFieldError("min_stock")),1)):c("",!0)])]),e("div",Ie,[e("label",Ve,r(t.__("image")),1),e("div",qe,[s.imagePreview||s.localForm.image_url||s.localForm.image?(n(),d("div",Be,[e("img",{src:s.imagePreview||s.localForm.image_url,alt:"Product",class:"rounded",style:{width:"80px",height:"80px","object-fit":"cover",border:"1px solid #ddd"}},null,8,Ue)])):c("",!0),e("div",Ne,[e("input",{type:"file",ref:"imageInput",onChange:l[10]||(l[10]=(...o)=>t.handleImageChange&&t.handleImageChange(...o)),accept:"image/jpeg,image/png,image/jpg,image/gif",class:m(["form-control",{"is-invalid":t.getFieldError("image")}])},null,34),t.getFieldError("image")?(n(),d("div",Le,r(t.getFieldError("image")),1)):c("",!0)]),s.imagePreview||s.localForm.image_url||s.localForm.image?(n(),d("button",{key:1,type:"button",onClick:l[11]||(l[11]=(...o)=>t.removeImage&&t.removeImage(...o)),class:"btn btn-sm btn-danger"},r(t.__("remove")),1)):c("",!0)])]),e("div",je,[e("div",Ae,[e("label",Oe,r(t.__("is_active")),1),h(e("select",{"onUpdate:modelValue":l[12]||(l[12]=o=>s.localForm.is_active=o),class:m(["form-select",{"is-invalid":t.getFieldError("is_active")}])},[e("option",Te,r(t.__("inactive")),1),e("option",De,r(t.__("active")),1)],2),[[E,s.localForm.is_active,void 0,{number:!0}]]),t.getFieldError("is_active")?(n(),d("div",Je,r(t.getFieldError("is_active")),1)):c("",!0)]),e("div",ze,[e("label",He,r(t.__("sort_order")),1),h(e("input",{"onUpdate:modelValue":l[13]||(l[13]=o=>s.localForm.sort_order=o),type:"number",class:m(["form-control",{"is-invalid":t.getFieldError("sort_order")}])},null,2),[[g,s.localForm.sort_order,void 0,{number:!0}]]),t.getFieldError("sort_order")?(n(),d("div",Re,r(t.getFieldError("sort_order")),1)):c("",!0)])]),e("div",Ke,[e("label",Ge,r(t.__("notes")),1),h(e("textarea",{"onUpdate:modelValue":l[14]||(l[14]=o=>s.localForm.notes=o),class:m(["form-control",{"is-invalid":t.getFieldError("notes")}]),rows:"3"},null,2),[[g,s.localForm.notes]]),t.getFieldError("notes")?(n(),d("div",Qe,r(t.getFieldError("notes")),1)):c("",!0)])])):(n(),d("div",We,[s.localForm.image_url?(n(),d("div",Xe,[e("strong",null,r(t.__("image"))+":",1),e("div",Ye,[e("img",{src:s.localForm.image_url,alt:"Product",class:"rounded",style:{width:"200px",height:"200px","object-fit":"cover",border:"1px solid #ddd"}},null,8,Ze)])])):c("",!0),e("div",$e,[e("strong",null,r(t.__("name"))+":",1),u(" "+r(s.localForm.name),1)]),s.localForm.sku?(n(),d("div",et,[e("strong",null,r(t.__("sku"))+":",1),u(" "+r(s.localForm.sku),1)])):c("",!0),s.localForm.description?(n(),d("div",tt,[e("strong",null,r(t.__("description"))+":",1),u(" "+r(s.localForm.description),1)])):c("",!0),e("div",st,[e("strong",null,r(t.__("price"))+":",1),u(" "+r(t.formatPrice(s.localForm.price)),1)]),s.localForm.cost_price?(n(),d("div",lt,[e("strong",null,r(t.__("cost_price"))+":",1),u(" "+r(t.formatPrice(s.localForm.cost_price)),1)])):c("",!0),e("div",rt,[e("strong",null,r(t.__("unit_type"))+":",1),u(" "+r(s.localForm.unit_display),1)]),s.localForm.weight?(n(),d("div",ot,[e("strong",null,r(t.__("weight"))+":",1),u(" "+r(s.localForm.weight)+" kg ",1)])):c("",!0),e("div",it,[e("strong",null,r(t.__("stock_quantity"))+":",1),u(" "+r(s.localForm.stock_quantity||0),1)]),e("div",dt,[e("strong",null,r(t.__("min_stock"))+":",1),u(" "+r(s.localForm.min_stock||0),1)]),s.localForm.tags&&s.localForm.tags.length>0?(n(),d("div",nt,[e("strong",null,r(t.__("tags"))+":",1),e("div",at,[(n(!0),d(F,null,y(s.localForm.tags,o=>(n(),d("span",{key:o.id,class:"badge",style:S({backgroundColor:o.color,color:i.getContrastColor(o.color)})},r(o.name),5))),128))])])):c("",!0),e("div",ct,[e("strong",null,r(t.__("status"))+":",1),e("span",{class:m(s.localForm.is_active?"badge bg-success":"badge bg-secondary")},r(s.localForm.is_active?t.__("active"):t.__("inactive")),3)]),s.localForm.notes?(n(),d("div",_t,[e("strong",null,r(t.__("notes"))+":",1),u(" "+r(s.localForm.notes),1)])):c("",!0)]))]),e("div",ut,[e("button",mt,r(t.__("cancel")),1),_.mode!=="view"?(n(),d("button",{key:0,type:"button",class:"btn btn-primary",onClick:l[15]||(l[15]=(...o)=>t.handleSave&&t.handleSave(...o))},[l[21]||(l[21]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-1"},[e("path",{d:"M5 12l5 5l10 -10"})],-1)),u(" "+r(t.__("save")),1)])):(n(),d("button",ht,r(t.__("close")),1))])])])],512)])}const vt=C(B,[["render",gt],["__scopeId","data-v-356578b0"]]),k=window.axios,pt={components:{ProductModal:vt},data(){return{products:{data:[],current_page:1,per_page:10,last_page:1,total:0,next_page_url:null,prev_page_url:null},search:"",perPage:10,perPageOptions:[10,20,50,100],showModal:!1,modalMode:"add",selectedProduct:null,validationErrors:{},t:window.productTranslations||{}}},mounted(){this.fetchProducts(),this.$nextTick(()=>{const i=document.getElementById("btn-add-product"),l=document.getElementById("btn-add-product-mobile");i&&i.addEventListener("click",()=>this.openAdd()),l&&l.addEventListener("click",()=>this.openAdd())})},methods:{__(i,l=""){return this.t[i]||l||i},fetchProducts(i=1){const l={search:this.search,per_page:this.perPage,page:i};k.get("/products",{params:l}).then(_=>{this.products=_.data}).catch(_=>{console.error(_)})},prevPage(){this.products.prev_page_url&&this.fetchProducts(this.products.current_page-1)},nextPage(){this.products.next_page_url&&this.fetchProducts(this.products.current_page+1)},openAdd(){this.modalMode="add",this.selectedProduct=null,this.validationErrors={},this.showModal=!0},openEdit(i){this.modalMode="edit",this.selectedProduct=JSON.parse(JSON.stringify(i)),this.validationErrors={},this.showModal=!0},openView(i){this.modalMode="view",this.selectedProduct=JSON.parse(JSON.stringify(i)),this.validationErrors={},this.showModal=!0},handleModalClose(){this.showModal=!1,this.selectedProduct=null,this.validationErrors={}},handleModalSave(i){const l=new FormData;Object.keys(i).forEach(a=>{a==="imageFile"?i.imageFile&&l.append("image",i.imageFile):a==="imagesFiles"&&Array.isArray(i.imagesFiles)?i.imagesFiles.forEach((s,t)=>{l.append(`images[${t}]`,s)}):a==="mode"||i[a]!==null&&i[a]!==void 0&&l.append(a,i[a])}),this.validationErrors={};const _={headers:{"Content-Type":"multipart/form-data"}};i.mode==="add"?k.post("/products",l,_).then(a=>{this.fetchProducts(),this.closeModal()}).catch(a=>{var s,t,v,o,p,b,f;if(console.error(a),((s=a.response)==null?void 0:s.status)===422&&((v=(t=a.response)==null?void 0:t.data)!=null&&v.errors))this.validationErrors=a.response.data.errors;else{const w=((p=(o=a.response)==null?void 0:o.data)==null?void 0:p.message)||((f=(b=a.response)==null?void 0:b.data)==null?void 0:f.error)||a.message;alert(this.__("save_error")+": "+w)}}):(l.append("_method","PUT"),k.post(`/products/${i.id}`,l,_).then(a=>{this.fetchProducts(),this.closeModal()}).catch(a=>{var s,t,v,o,p,b,f;if(console.error(a),((s=a.response)==null?void 0:s.status)===422&&((v=(t=a.response)==null?void 0:t.data)!=null&&v.errors))this.validationErrors=a.response.data.errors;else{const w=((p=(o=a.response)==null?void 0:o.data)==null?void 0:p.message)||((f=(b=a.response)==null?void 0:b.data)==null?void 0:f.error)||a.message;alert(this.__("update_error")+": "+w)}}))},closeModal(){this.showModal=!1,this.selectedProduct=null,this.validationErrors={},this.$nextTick(()=>{const i=document.getElementById("productModal");if(i){const l=i.querySelector('button[data-bs-dismiss="modal"]');l?l.click():this.handleModalClose()}else this.handleModalClose()})},confirmDelete(i){confirm(this.__("delete_confirm"))&&k.delete(`/products/${i.id}`).then(()=>{this.fetchProducts()}).catch(l=>{console.error(l),alert(this.__("delete_error"))})},formatPrice(i){return i?new Intl.NumberFormat("vi-VN").format(i)+" đ":"0 đ"},getStockClass(i){return i.is_low_stock?"text-warning fw-bold":i.stock_quantity===0?"text-danger fw-bold":"text-secondary"},getPageNumbers(){const i=this.products.current_page||1,l=this.products.last_page||1,_=[],a=5;if(l<=a)for(let s=1;s<=l;s++)_.push(s);else if(i<=3)for(let s=1;s<=a;s++)_.push(s);else if(i>=l-2)for(let s=l-a+1;s<=l;s++)_.push(s);else for(let s=i-2;s<=i+2;s++)_.push(s);return _}}},bt={class:"card-body border-bottom py-3"},ft={class:"d-flex"},kt={class:"text-secondary"},Ft={class:"mx-2 d-inline-block"},yt=["value"],wt={class:"ms-auto text-secondary"},xt={class:"ms-2 d-inline-block"},Et=["placeholder"],Pt={class:"table-responsive"},Mt={class:"table card-table table-vcenter text-nowrap datatable"},Ct={class:"w-1"},St={class:"text-secondary"},It={class:"text-secondary"},Vt={class:"d-flex align-items-center gap-2"},qt=["src"],Bt={href:"#",class:"text-reset"},Ut={class:"text-primary fw-bold"},Nt={class:"text-secondary"},Lt={key:0,class:"badge bg-warning ms-1"},jt={class:"text-end"},At={class:"btn-list justify-content-end"},Ot=["onClick"],Tt=["onClick"],Dt=["onClick"],Jt={key:0},zt={colspan:"8",class:"text-center text-secondary py-4"},Ht={class:"card-footer d-flex align-items-center"},Rt={class:"m-0 text-secondary"},Kt={class:"pagination m-0 ms-auto"},Gt=["tabindex","aria-disabled"],Qt=["onClick"],Wt=["tabindex","aria-disabled"];function Xt(i,l,_,a,s,t){const v=P("ProductModal");return n(),d("div",null,[e("div",bt,[e("div",ft,[e("div",kt,[u(r(t.__("show"))+" ",1),e("div",Ft,[h(e("select",{"onUpdate:modelValue":l[0]||(l[0]=o=>s.perPage=o),onChange:l[1]||(l[1]=(...o)=>t.fetchProducts&&t.fetchProducts(...o)),class:"form-select form-select-sm"},[(n(!0),d(F,null,y(s.perPageOptions,o=>(n(),d("option",{key:o,value:o},r(o),9,yt))),128))],544),[[E,s.perPage,void 0,{number:!0}]])]),u(" "+r(t.__("entries")),1)]),e("div",wt,[u(r(t.__("search"))+": ",1),e("div",xt,[h(e("input",{"onUpdate:modelValue":l[2]||(l[2]=o=>s.search=o),onInput:l[3]||(l[3]=(...o)=>t.fetchProducts&&t.fetchProducts(...o)),type:"text",class:"form-control form-control-sm",placeholder:t.__("search_placeholder")},null,40,Et),[[g,s.search]])])])])]),e("div",Pt,[e("table",Mt,[e("thead",null,[e("tr",null,[e("th",Ct,r(t.__("no")),1),e("th",null,r(t.__("sku")),1),e("th",null,r(t.__("name")),1),e("th",null,r(t.__("price")),1),e("th",null,r(t.__("unit")),1),e("th",null,r(t.__("stock")),1),e("th",null,r(t.__("status")),1),l[6]||(l[6]=e("th",null,null,-1))])]),e("tbody",null,[(n(!0),d(F,null,y(s.products.data,(o,p)=>(n(),d("tr",{key:o.id},[e("td",null,[e("span",St,r((s.products.current_page-1)*s.products.per_page+p+1),1)]),e("td",null,[e("span",It,r(o.sku||"--"),1)]),e("td",null,[e("div",Vt,[o.image_url?(n(),d("img",{key:0,src:o.image_url,alt:"Product",class:"rounded",style:{width:"32px",height:"32px","object-fit":"cover"}},null,8,qt)):c("",!0),e("a",Bt,r(o.name),1)])]),e("td",null,[e("span",Ut,r(t.formatPrice(o.price)),1)]),e("td",null,[e("span",Nt,r(o.unit_display),1)]),e("td",null,[e("span",{class:m(t.getStockClass(o))},r(o.stock_quantity||0),3),o.is_low_stock?(n(),d("span",Lt,r(t.__("low_stock")),1)):c("",!0)]),e("td",null,[e("span",{class:m(o.is_active==1?"badge bg-success":"badge bg-secondary")},r(o.is_active==1?t.__("active"):t.__("inactive")),3)]),e("td",jt,[e("div",At,[e("button",{onClick:b=>t.openView(o),type:"button",class:"btn btn-sm btn-ghost-secondary"},r(t.__("view")),9,Ot),e("button",{onClick:b=>t.openEdit(o),type:"button",class:"btn btn-sm btn-ghost-warning"},r(t.__("edit")),9,Tt),e("button",{onClick:b=>t.confirmDelete(o),type:"button",class:"btn btn-sm btn-ghost-danger"},r(t.__("delete")),9,Dt)])])]))),128)),!s.products.data||s.products.data.length===0?(n(),d("tr",Jt,[e("td",zt,r(t.__("no_products_found")),1)])):c("",!0)])])]),e("div",Ht,[e("p",Rt,[u(r(t.__("showing"))+" ",1),e("span",null,r(s.products.data.length>0?(s.products.current_page-1)*s.products.per_page+1:0),1),u(" "+r(t.__("to"))+" ",1),e("span",null,r(s.products.data.length>0?(s.products.current_page-1)*s.products.per_page+s.products.data.length:0),1),u(" "+r(t.__("of"))+" ",1),e("span",null,r(s.products.total||0),1),u(" "+r(t.__("entries")),1)]),e("ul",Kt,[e("li",{class:m(["page-item",{disabled:!s.products.prev_page_url}])},[e("a",{class:"page-link",href:"#",onClick:l[4]||(l[4]=x((...o)=>t.prevPage&&t.prevPage(...o),["prevent"])),tabindex:s.products.prev_page_url?null:"-1","aria-disabled":!s.products.prev_page_url},[l[7]||(l[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M15 6l-6 6l6 6"})],-1)),u(" "+r(t.__("prev")),1)],8,Gt)],2),(n(!0),d(F,null,y(t.getPageNumbers(),o=>(n(),d("li",{class:m(["page-item",{active:s.products.current_page===o}]),key:o},[e("a",{class:"page-link",href:"#",onClick:x(p=>t.fetchProducts(o),["prevent"])},r(o),9,Qt)],2))),128)),e("li",{class:m(["page-item",{disabled:!s.products.next_page_url}])},[e("a",{class:"page-link",href:"#",onClick:l[5]||(l[5]=x((...o)=>t.nextPage&&t.nextPage(...o),["prevent"])),tabindex:s.products.next_page_url?null:"-1","aria-disabled":!s.products.next_page_url},[u(r(t.__("next"))+" ",1),l[8]||(l[8]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M9 6l6 6l-6 6"})],-1))],8,Wt)],2)])]),M(v,{show:s.showModal,mode:s.modalMode,product:s.selectedProduct,errors:s.validationErrors,onClose:t.handleModalClose,onSave:t.handleModalSave},null,8,["show","mode","product","errors","onClose","onSave"])])}const Yt=C(pt,[["render",Xt],["__scopeId","data-v-2e16518c"]]),Zt=I(Yt);Zt.mount("#products-app");
